<div class="tabel-view-body">
    <mat-form-field>
      <input
        matInput
        (keyup)="applyFilter($event.target.value)"
        placeholder="Search A table"
      />
    </mat-form-field>
    <mat-accordion>
      <mat-expansion-panel
        *ngFor="let item of tablesList; let i = index"
        [attr.data-index]="i"
        (opened)="getTableStructure(item.name, i); item.openeds = true; loaded[i] = false;"
        (closed)="item.openeds = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ item.name }}
          </mat-panel-title>
          <mat-panel-description>
            {{ item.name | fromTableNameToTitle }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-spinner *ngIf="item.openeds && item.colSource.length === 0" ></mat-spinner>
        <table *ngIf="item.colSource.length" mat-table matSort [dataSource]="item.colSource">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
            <td mat-cell *matCellDef="let element">{{ element.type }}</td>
          </ng-container>
          <ng-container matColumnDef="nullable">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Nullable</th>
            <td mat-cell *matCellDef="let element">
              <section class="example-section">
                <mat-slide-toggle
                  class="example-margin"
                  [color]="'accent'"
                  [checked]="element.nullable"
                >
                </mat-slide-toggle>
              </section>
            </td>
          </ng-container>
          <ng-container matColumnDef="isPk">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Is Primary Key
            </th>
            <td mat-cell *matCellDef="let element">
              <section class="example-section">
                <mat-slide-toggle
                  class="example-margin"
                  [color]="'accent'"
                  [checked]="element.isPk"
                >
                </mat-slide-toggle>
              </section>
            </td>
          </ng-container>
          <ng-container matColumnDef="relatedToTable">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>relatedToTable</th>
            <td mat-cell *matCellDef="let element">{{ element.relatedToTable }}</td>
          </ng-container>
          <ng-container matColumnDef="atColumn">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>atColumn</th>
            <td mat-cell *matCellDef="let element">{{ element.atColumn }}</td>
          </ng-container>
          <ng-container matColumnDef="fkName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Foreign key Name</th>
            <td mat-cell *matCellDef="let element">{{ element.fkName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </mat-expansion-panel>
    </mat-accordion>
  </div>